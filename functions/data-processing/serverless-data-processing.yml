service: energy-dashboard-backend-data

plugins:
  - '@shelf/serverless-simplify-default-exec-role-plugin'

provider:
  name: aws
  runtime: nodejs18.x
  memorySize: 128
  timeout: 120
  stage: dev
  region: eu-central-1
  tags:
    STAGE: ${sls:stage}
  tracing:
    lambda: true # optional, enables tracing for all functions (can be true (true equals 'Active') 'Active' or 'PassThrough')
  environment:
    S3_BUCKET: bfe-energy-dashboard-raw-data-${sls:stage}
    S3_IMAGE_BUCKET: bfe-energie-dashboard-public-static-files-${sls:stage}
    ENV: ${sls:stage}

package:
  exclude:
    - node_modules/**

layers:
  common-layer:
    path: dist/common-layer
    name: ${sls:stage}-common-layer
    description: Contains common source used in multiple functions
    package:
      include:
        - dist/common-layer
    compatibleRuntimes:
      - nodejs16.x
  node-modules-layer:
    path: dist/node-modules-layer
    name: ${sls:stage}-node-modules-layer
    description: Contains all node modules used in functions
    package:
      include:
        - dist/node-modules-layer
    compatibleRuntimes:
      - nodejs16.x

functions:
  data-processing-routing-function:
    handler: dist/functions/data-processing/routing-function/routing-function.handler
    name: ${sls:stage}-data-processing-routing-function
    description: Properly routes Aws Events to the relevant lambda functions
    events:
      - s3:
          bucket: ${self:provider.environment.S3_BUCKET}
          event: s3:ObjectCreated:*
          existing: true
    package:
      patterns:
        - dist/functions/data-processing/routing-function/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-fuellungsgrad-speicherseen-v2:
    handler: dist/functions/data-processing/strom-fuellungsgrad-speicherseen/strom-fuellungsgrad-speicherseen-v2.handler
    name: ${sls:stage}-data-processing-fuellungsgrad-speicherseen-v2
    description: Processes data for Fuellungsgrad of Speicherseen, Version 2
    package:
      patterns:
        - dist/functions/data-processing/strom-fuellungsgrad-speicherseen/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-dynamic-translations:
    handler: dist/functions/data-processing/dynamic-translations/dynamic-translations.handler
    name: ${sls:stage}-data-processing-dynamic-translations
    description: Processes dynamic translations
    package:
      patterns:
        - dist/functions/data-processing/dynamic-translations/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-fuellstand-gasspeicher-v2:
    handler: dist/functions/data-processing/fuellstand-gasspeicher/fuellstand-gasspeicher-v2.handler
    name: ${sls:stage}-data-processing-fuellstand-gasspeicher-v2
    description: Processes data for Fuellstand Gasspeicher, Version 2
    package:
      patterns:
        - dist/functions/data-processing/fuellstand-gasspeicher/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-import-export-historical-values-v2:
    handler: dist/functions/data-processing/strom-import-export/strom-import-export-historical-values-v2.handler
    name: ${sls:stage}-data-processing-strom-import-export-historical-values-v2
    description: Processes data for historical values of Strom Import/Export Version 2
    package:
      patterns:
        - dist/functions/data-processing/strom-import-export/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-import-export-netto:
    handler: dist/functions/data-processing/strom-import-export/strom-import-export-netto.handler
    name: ${sls:stage}-data-processing-strom-import-export-netto
    description: Processes data for netto values of Strom Import/Export
    package:
      patterns:
        - dist/functions/data-processing/strom-import-export/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-ampel:
    handler: dist/functions/data-processing/ampel/ampel.handler
    name: ${sls:stage}-data-processing-ampel
    description: Processes data for Ampel
    package:
      patterns:
        - dist/functions/data-processing/ampel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-gas-import-karte:
    handler: dist/functions/data-processing/gas-import/gas-import-karte.handler
    name: ${sls:stage}-data-processing-gas-import-karte
    description: Processes data for Gas Import Karte
    package:
      patterns:
        - dist/functions/data-processing/gas-import/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-gas-import-historical-values-v2:
    handler: dist/functions/data-processing/gas-import/gas-import-historical-values-v2.handler
    name: ${sls:stage}-data-processing-gas-import-historical-values-v2
    description: Processes data for Gas Import historical values Version 2
    package:
      patterns:
        - dist/functions/data-processing/gas-import/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-kkw-produktion-ch-v1:
    handler: dist/functions/data-processing/strom-kkw/strom-kkw-produktion-ch.handler
    name: ${sls:stage}-data-processing-strom-kkw-produktion-ch-v1
    description: Processes KKW production data for CH V1
    package:
      patterns:
        - dist/functions/data-processing/strom-kkw/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-kkw-produktion-fr-v1:
    handler: dist/functions/data-processing/strom-kkw/strom-kkw-produktion-fr.handler
    name: ${sls:stage}-data-processing-strom-kkw-produktion-fr-v1
    description: Processes KKW production data for FR
    package:
      patterns:
        - dist/functions/data-processing/strom-kkw/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-kkw-ausfaelle-v1:
    handler: dist/functions/data-processing/strom-kkw/strom-kkw-ausfaelle.handler
    name: ${sls:stage}-data-processing-strom-kkw-ausfaelle-v1
    description: Processes KKW ausfaelle data
    package:
      patterns:
        - dist/functions/data-processing/strom-kkw/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-kkw-verfuegbarkeit:
    handler: dist/functions/data-processing/strom-kkw/strom-kkw-verfuegbarkeit.handler
    name: ${sls:stage}-data-processing-strom-kkw-verfuegbarkeit
    description: Processes KKW verfuegbarkeit data
    package:
      patterns:
        - dist/functions/data-processing/strom-kkw/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-produktionsmix:
    handler: dist/functions/data-processing/strom-produktion/strom-produktionsmix.handler
    name: ${sls:stage}-data-processing-strom-produktionsmix
    description: Processes data for Strom produktionsmix
    package:
      patterns:
        - dist/functions/data-processing/strom-produktion/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-produktion-import-verbrauch:
    handler: dist/functions/data-processing/strom-produktion/strom-produktion-import-verbrauch.handler
    name: ${sls:stage}-data-processing-strom-produktion-import-verbrauch
    description: Processes data for Strom Produktion, Import & Verbrauch
    package:
      patterns:
        - dist/functions/data-processing/strom-produktion/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-verbrauch-landesverbrauch-mit-prognose-v2:
    handler: dist/functions/data-processing/strom-verbrauch/strom-verbrauch-landesverbrauch-mit-prognose-v2.handler
    name: ${sls:stage}-data-processing-landesverbrauch-prognose-v2
    description: Processes data for Strom Verbrauch Landesverbrauch mit Prognose Version 2
    package:
      patterns:
        - dist/functions/data-processing/strom-verbrauch/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-verbrauch-endverbrauch-v2:
    handler: dist/functions/data-processing/strom-verbrauch/strom-verbrauch-endverbrauch-v2.handler
    name: ${sls:stage}-data-processing-strom-verbrauch-endverbrauch-v2
    description: Processes data for Strom Verbrauch Endverbrauch Version 2
    package:
      patterns:
        - dist/functions/data-processing/strom-verbrauch/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-verbrauch-landesverbrauch-vergleich-v2:
    handler: dist/functions/data-processing/strom-verbrauch/strom-verbrauch-landesverbrauch-vergleich-v2.handler
    name: ${sls:stage}-data-processing-strom-landesverbrauch-vergleich-v2
    description: Processes data for Strom Verbrauch Landesverbrauch Vergleich Version 2
    package:
      patterns:
        - dist/functions/data-processing/strom-verbrauch/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-sparziel-ziel-v4:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-ziel-v4.handler
    name: ${sls:stage}-data-processing-strom-sparziel-ziel-v4
    description: Processes data for Strom Sparziel Ziel V4
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-sparziel-aktuelle-einsparung-v4:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-aktuelle-einsparung-v4.handler
    name: ${sls:stage}-data-processing-strom-sparziel-aktuelle-einsparung-v4
    description: Processes data for Strom Sparziel Aktuelle Einsparung Version 4
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-sparziel-einsparung-aktueller-monat-kundengruppe:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-einsparung-aktueller-monat-kundengruppe.handler
    name: ${sls:stage}-data-processing-sparziel-aktueller-monat-kundengruppe
    description: Processes data for Strom Sparziel Einsparung Aktueller Monat Kundengruppe
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-sparziel-einsparung-pro-monat-kundengruppe-v2:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-einsparung-pro-monat-kundengruppe-v2.handler
    name: ${sls:stage}-data-processing-sparziel-pro-monat-kundengruppe-v2
    description: Processes data for Strom Sparziel Einsparung Pro Monat Kundengruppe V2
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-sparziel-ziel-aktueller-monat-kundengruppe:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-ziel-aktueller-monat-kundengruppe.handler
    name: ${sls:stage}-data-processing-sparziel-ziel-aktueller-monat-kundengruppe
    description: Processes data for Strom Sparziel Ziel Aktueller Monat Kundengruppe
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-sparziel-5-prozent-peak-h:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-5-prozent-peak-h.handler
    name: ${sls:stage}-data-processing-strom-sparziel-5-prozent-peak-h
    description: Processes data for Strom Sparziel 5 Prozent Peak H
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-sparziel-5-prozent-einsparungen:
    handler: dist/functions/data-processing/strom-sparziel/strom-sparziel-5-prozent-einsparungen.handler
    name: ${sls:stage}-data-processing-strom-sparziel-5-prozent-einsparungen
    description: Processes data for Strom Sparziel 5 Prozent Einsparungen
    package:
      patterns:
        - dist/functions/data-processing/strom-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-gas-sparziel-ziel-v4:
    handler: dist/functions/data-processing/gas-sparziel/gas-sparziel-ziel-v4.handler
    name: ${sls:stage}-data-processing-gas-sparziel-ziel-v4
    description: Processes data for Gas Sparziel Ziel Version 4
    package:
      patterns:
        - dist/functions/data-processing/gas-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-gas-sparziel-aktuelle-einsparung-v4:
    handler: dist/functions/data-processing/gas-sparziel/gas-sparziel-aktuelle-einsparung-v4.handler
    name: ${sls:stage}-data-processing-gas-sparziel-aktuelle-einsparung-v4
    description: Processes data for Gas Sparziel Aktuelle Einsparung Version 4
    package:
      patterns:
        - dist/functions/data-processing/gas-sparziel/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-strom-import-export-uebersicht:
    handler: dist/functions/data-processing/strom-import-export/strom-import-export-uebersicht.handler
    name: ${sls:stage}-data-processing-strom-import-export-uebersicht
    description: Processes data for Uebersicht for Strom Import & Export
    package:
      patterns:
        - dist/functions/data-processing/strom-import-export/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-spartipps-v2:
    handler: dist/functions/data-processing/spartipps/spartipps-v2.handler
    name: ${sls:stage}-data-processing-spartipps-v2
    description: Processes data for Spartipps, version 2
    package:
      patterns:
        - dist/functions/data-processing/spartipps/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-treibstoff-bleifrei:
    handler: dist/functions/data-processing/preise/preise-treibstoff-bleifrei.handler
    name: ${sls:stage}-data-processing-preise-treibstoff-bleifrei
    description: Processes data for Preise Treibstoff Bleifrei
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-treibstoff-diesel:
    handler: dist/functions/data-processing/preise/preise-treibstoff-diesel.handler
    name: ${sls:stage}-data-processing-preise-treibstoff-diesel
    description: Processes data for Preise Treibstoff Diesel
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-gas-endverbrauch:
    handler: dist/functions/data-processing/preise/preise-gas-endverbrauch.handler
    name: ${sls:stage}-data-processing-preise-gas-endverbrauch
    description: Processes data for Preise Gas Endverbrauch
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-gas-dayahead:
    handler: dist/functions/data-processing/preise/preise-gas-dayahead.handler
    name: ${sls:stage}-data-processing-preise-gas-dayahead
    description: Processes data for Preise Gas Dayahead
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-gas-futures:
    handler: dist/functions/data-processing/preise/preise-gas-futures.handler
    name: ${sls:stage}-data-processing-preise-gas-futures
    description: Processes data for Preise Gas Futures
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-heizoel-entwicklung:
    handler: dist/functions/data-processing/preise/preise-heizoel-entwicklung.handler
    name: ${sls:stage}-data-processing-preise-heizoel-entwicklung
    description: Processes data for Preise Heizoel Entwicklung
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-strom-boerse:
    handler: dist/functions/data-processing/preise/preise-strom-boerse.handler
    name: ${sls:stage}-data-processing-preise-strom-boerse
    description: Processes data for Preise Strom Boerse
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-strom-endverbrauch:
    handler: dist/functions/data-processing/preise/preise-strom-endverbrauch.handler
    name: ${sls:stage}-data-processing-preise-strom-endverbrauch
    description: Processes data for Preise Strom Endverbrauch
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-strom-futures:
    handler: dist/functions/data-processing/preise/preise-strom-futures.handler
    name: ${sls:stage}-data-processing-preise-strom-futures
    description: Processes data for Preise Strom Futures
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-brennholz-endverbrauch:
    handler: dist/functions/data-processing/preise/preise-brennholz-endverbrauch.handler
    name: ${sls:stage}-data-processing-preise-brennholz-endverbrauch
    description: Processes data for Preise Brennholz Endverbrauch
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-preise-fernwaerme-endverbrauch:
    handler: dist/functions/data-processing/preise/preise-fernwaerme-endverbrauch.handler
    name: ${sls:stage}-data-processing-preise-fernwaerme-endverbrauch
    description: Processes data for Preise Fernwaerme Endverbrauch
    package:
      patterns:
        - dist/functions/data-processing/preise/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-temperatur-aktuell:
    handler: dist/functions/data-processing/wetter/wetter-temperatur-aktuell.handler
    name: ${sls:stage}-data-processing-wetter-temperatur-aktuell
    description: Processes data for Wetter Temperatur Aktuell
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-temperatur-prognose:
    handler: dist/functions/data-processing/wetter/wetter-temperatur-prognose.handler
    name: ${sls:stage}-data-processing-wetter-temperatur-prognose
    description: Processes data for Wetter Temperatur Prognose
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-temperatur-trend-v2:
    handler: dist/functions/data-processing/wetter/wetter-temperatur-trend-v2.handler
    name: ${sls:stage}-data-processing-wetter-temperatur-trend-v2
    description: Processes data for Wetter Temperatur Trend version 2
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-niederschlag-v2:
    handler: dist/functions/data-processing/wetter/wetter-niederschlag-v2.handler
    name: ${sls:stage}-data-processing-wetter-niederschlag-v2
    description: Processes data for Wetter Niederschlag V2
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-niederschlag-bilder-daten:
    handler: dist/functions/data-processing/wetter/wetter-niederschlag-bilder-daten.handler
    name: ${sls:stage}-data-processing-wetter-niederschlag-bilder-daten
    description: Processes data for Wetter Niederschlag Bilder Daten
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-wetter-schneereserven:
    handler: dist/functions/data-processing/wetter/wetter-schneereserven.handler
    name: ${sls:stage}-data-processing-wetter-schneereserven
    description: Processes data for Wetter Schneereserven
    package:
      patterns:
        - dist/functions/data-processing/wetter/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

  data-processing-images:
    handler: dist/functions/data-processing/images/images.handler
    name: ${sls:stage}-data-processing-images
    description: Processes data for Images
    package:
      patterns:
        - dist/functions/data-processing/images/*
    layers:
      - !Ref CommonDashlayerLambdaLayer
      - !Ref NodeDashmodulesDashlayerLambdaLayer

resources: # CloudFormation template syntax from here on.
  Transform: AWS::Serverless-2016-10-31
  Resources:
    # Default Template for DynamoDB Table
    DynamoDBTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        PrimaryKey:
          Name: id
          Type: String
        Tags:
          STAGE: ${sls:stage}

    # Tables Strom
    StromFuellungsgradSpeicherseenV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-fuellungsgrad-speicherseen-v2
    StromImportExportHistoricalValuesV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-import-export-historical-values-v2
    StromImportExportNettoTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-import-export-netto
    StromImportExportUebersichtTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-import-export-uebersicht
    StromProduktionsmixTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-produktionsmix
    StromProduktionImportVerbrauchTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-produktion-import-verbrauch
    StromVerbrauchLandesverbrauchMitPrognoseV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-verbrauch-landesverbrauch-mit-prognose-v2
    StromVerbrauchEndverbrauchV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-verbrauch-endverbrauch-v2
    StromVerbrauchLandesverbrauchVergleichV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-verbrauch-landesverbrauch-vergleich-v2
    StromSparzielZielV4Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-ziel-v4
    StromSparzielAktuelleEinsparungV4Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-aktuelle-einsparung-v4
    StromSparzielEinsparungProMonatKundengruppeV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-einsparung-pro-monat-kundengruppe-v2
    StromSparzielEinsparungAktuellerMonatKundengruppeTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-einsparung-aktueller-monat-kundengruppe
    StromSparzielZielAktuellerMonatKundengruppeTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-ziel-aktueller-monat-kundengruppe
    StromSparziel5ProzentPeakHTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-5-prozent-peak-h
    StromSparziel5ProzentEinsparungenTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-sparziel-5-prozent-einsparungen
    StromSparzielKKWProduktionCHV1Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-kkw-produktion-ch-v1
    StromSparzielKKWProduktionFRV1Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-strom-kkw-produktion-fr-v1

    # Tables Strom without default values
    StromKkwAusfaelleTablePatch1:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: ${sls:stage}-strom-kkw-ausfaelle-v1-p1
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
          - AttributeName: country
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH
        BillingMode: PAY_PER_REQUEST
        GlobalSecondaryIndexes:
          - IndexName: country-index
            Projection:
              ProjectionType: ALL
            KeySchema:
              - AttributeName: country
                KeyType: HASH
        Tags:
          - Key: STAGE
            Value: ${sls:stage}
    StromKkwVerfuegbarkeitTablePatch1:
      Type: AWS::DynamoDB::Table
      Properties:
        TableName: ${sls:stage}-strom-kkw-verfuegbarkeit-p1
        AttributeDefinitions:
          - AttributeName: id
            AttributeType: S
          - AttributeName: country
            AttributeType: S
        KeySchema:
          - AttributeName: id
            KeyType: HASH
        BillingMode: PAY_PER_REQUEST
        GlobalSecondaryIndexes:
          - IndexName: country-index
            Projection:
              ProjectionType: ALL
            KeySchema:
              - AttributeName: country
                KeyType: HASH
        Tags:
          - Key: STAGE
            Value: ${sls:stage}

    # Tables Gas
    GasFuellstandGasspeicherV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-gas-fuellstand-gasspeicher-v2
    GasImportKarteTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-gas-import-karte
    GasImportHistoricalValuesV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-gas-import-historical-values-v2
    GasSparzielZielV4Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-gas-sparziel-ziel-v4
    GasSparzielAktuelleEinsparungV4Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-gas-sparziel-aktuelle-einsparung-v4

    # Tables Preise
    PreiseStromBoerseTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-strom-boerse
    PreiseStromEndverbrauchTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-strom-endverbrauch
    PreiseFuturesStromTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-strom-futures
    PreiseGasDayaheadTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-gas-dayahead
    PreiseGasEndverbrauchTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-gas-endverbrauch
    PreiseFuturesGasTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-gas-futures
    PreiseTreibstoffBleifreiTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-treibstoff-bleifrei
    PreiseTreibstoffDieselTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-treibstoff-diesel
    PreiseHeizoelEntwicklungTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-heizoel-entwicklung
    PreiseBrennholzEndverbrauchTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-brennholz-endverbrauch
    PreiseFernwaermeEndverbrauchTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-preise-fernwaerme-endverbrauch

    # Tables Wetter
    WetterTemperaturAktuellTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-temperatur-aktuell
    WetterTemperaturPrognoseTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-temperatur-prognose
    WetterTemperaturTrendV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-temperatur-trend-v2
    WetterNiederschlagV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-niederschlag-v2
    WetterNiederschlagBilderDatenTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-niederschlag-bilder-daten
    WetterSchneerservenTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-wetter-schneereserven

    # Tables Overview
    DynamicTranslationsTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-dynamic-translations
    AmpelTable:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-ampel
    SpartippsV2Table:
      Type: AWS::Serverless::SimpleTable
      Properties:
        TableName: ${sls:stage}-spartipps-v2